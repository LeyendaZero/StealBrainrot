<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Encuesta rápida</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
    .box { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h2 { color: #333; }
    .data { background: #eef; padding: 10px; border-radius: 5px; margin-top: 15px; }
  </style>
</head>
<body>
  <div class="box">
    <h2>Encuesta rápida</h2>
    <p>Gracias por participar. Detectamos algunos datos para personalizar tu experiencia:</p>

    <div class="data" id="info">
      <p>Cargando información de tu dispositivo...</p>
    </div>
  </div>

  <script>
    async function obtenerDatos() {
      // Fingerprinting básico
      const idioma = navigator.language;
      const zona = Intl.DateTimeFormat().resolvedOptions().timeZone;
      const resolucion = `${screen.width}x${screen.height}`;
      const userAgent = navigator.userAgent;

      // Geolocalización por IP
      let ubicacion = {};
      try {
        const res = await fetch("https://ipapi.co/json/");
        ubicacion = await res.json();
      } catch (e) {
        ubicacion.city = "Desconocida";
        ubicacion.region = "";
        ubicacion.country_name = "";
      }

      // Mostrar resultados
      document.getElementById("info").innerHTML = `
        <strong>Idioma del navegador:</strong> ${idioma}<br>
        <strong>Zona horaria:</strong> ${zona}<br>
        <strong>Resolución de pantalla:</strong> ${resolucion}<br>
        <strong>Navegador / Sistema:</strong> ${userAgent}<br><br>
        <strong>Ubicación aproximada (IP):</strong><br>
        Ciudad: ${ubicacion.city}<br>
        Región: ${ubicacion.region}<br>
        País: ${ubicacion.country_name}<br>
        IP: ${ubicacion.ip}
      `;
    }

    obtenerDatos();
  </script>
</body>
</html>
